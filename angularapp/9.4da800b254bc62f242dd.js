(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{CgF7:function(t,e,n){"use strict";n.r(e),n.d(e,"ChatModule",function(){return m});var o=n("ofXK"),s=n("tyNb"),r=n("fXoL"),c=n("lJxs"),i=n("I/3d"),a=n("lGQG");let g=(()=>{class t{constructor(t,e){this.angularFirestore=t,this.authService=e,this.chats=[]}getMessages(){return this.itemsCollection=this.angularFirestore.collection("chats",t=>t.orderBy("date","desc").limit(50)),this.itemsCollection.valueChanges().pipe(Object(c.a)(t=>{this.chats=[];for(const e of t)this.chats.unshift(e);return this.chats}))}sendMessage(t){const e={name:this.authService.user.email,message:t,date:(new Date).getTime(),dateFormatted:`${new Date((new Date).getTime()).toLocaleDateString("es-AR")} ${new Date((new Date).getTime()).toLocaleTimeString("es-AR")}`,uid:this.authService.user.uid};return this.itemsCollection.add(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(i.a),r.Wb(a.a))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=n("3Pt+");const h=function(t){return{"text-right":t}};function d(t,e){if(1&t&&(r.Sb(0,"div",8),r.Sb(1,"span"),r.sc(2),r.Rb(),r.Sb(3,"p"),r.sc(4),r.Rb(),r.Rb()),2&t){const t=e.$implicit,n=r.dc();r.gc("ngClass",r.ic(7,h,n.authService.user.uid==t.uid)),r.Bb(1),r.Eb("badge rounded-pill ",n.authService.user.uid==t.uid?n.colorMe:n.colorOther,""),r.Bb(1),r.vc(" ",t.name," | ",t.dateFormatted,""),r.Bb(2),r.uc(" ",t.message," ")}}const b=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t,e){this.chatService=t,this.authService=e,this.message="",this.colorMe="",this.colorOther="",this.colors=["bg-primary","bg-secondary","bg-success","bg-danger","bg-warning text-dark","bg-info text-dark","bg-dark"],this.chatService.getMessages().subscribe(()=>{setTimeout(()=>{this.element.scrollTop=this.element.scrollHeight},20)})}ngOnInit(){this.element=document.getElementById("messages"),this.colorMe=this.getRandomColor();const t=this.getRandomColor();this.colorOther=this.colorMe===t?this.getRandomColor():t}sendMessage(){0!==this.message.trim().length&&this.chatService.sendMessage(this.message).then(()=>this.cleanInput()).catch(t=>{console.error("Error al enviar",t)})}cleanInput(){this.message=""}getRandomColor(){return this.colors[Math.floor(Math.random()*this.colors.length)]}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(g),r.Nb(a.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-chat"]],decls:12,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"panel","panel-primary"],["id","messages",1,"panel-body"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"panel-footer"],["placeholder","Ingrese su mensaje y pulse [Enter]...","type","text","name","mensaje",1,"form-control","messageBox",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"]],template:function(t,e){1&t&&(r.Sb(0,"h1"),r.sc(1,"Sala de chat"),r.Rb(),r.Ob(2,"hr"),r.Sb(3,"div",0),r.Sb(4,"div",1),r.Sb(5,"div",2),r.Sb(6,"div",3),r.Sb(7,"div",4),r.rc(8,d,5,9,"div",5),r.Rb(),r.Rb(),r.Sb(9,"div",6),r.Sb(10,"div",2),r.Sb(11,"input",7),r.Zb("ngModelChange",function(t){return e.message=t})("keyup.enter",function(){return e.sendMessage()}),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(8),r.gc("ngForOf",e.chatService.chats),r.Bb(3),r.gc("ngModel",e.message))},directives:[o.j,l.b,l.h,l.j,o.i],styles:[".chat[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.chat[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;padding-bottom:5px;border-bottom:1px dotted #b3a9a9}.chat[_ngcontent-%COMP%]   li.left[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{margin-left:60px}.chat[_ngcontent-%COMP%]   li.right[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{margin-right:60px}.chat[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#777}.chat[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .panel[_ngcontent-%COMP%]   .slidedown[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin-right:5px}.panel-body[_ngcontent-%COMP%]{overflow-y:scroll;height:400px;padding:0 5%}[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px #0000004d;background-color:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;background-color:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{-webkit-box-shadow:inset 0 0 6px #0000004d;background-color:#555}.messageBox[_ngcontent-%COMP%]{margin-top:3%;padding:1%}"]}),t})()}]}];let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[s.g.forChild(b)],s.g]}),t})(),m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:[g],imports:[[o.c,u,l.g]]}),t})()}}]);